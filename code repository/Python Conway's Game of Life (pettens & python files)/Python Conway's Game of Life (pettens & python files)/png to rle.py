from PIL import Image

# ===== ì„¤ì • =====
IMAGE_PATH = r"C:\Users\JOY\Desktop\íƒœë¯¼ì´ íœ´ëŒ€í°\âŸªğŸ‘¨ğŸ»â€ğŸ’»íƒœë¯¼íŒŒì¼âœ¨âŸ«\íƒœë¯¼ì‘í’ˆ\âŸªå¤§éŸ“ Multiverse Empire â€¢ Established 1995 â€¢ ê±´ì–‘(å»ºé™½) 1024x1024px ì›ë…„ logoâŸ«.png"   # â† ë³€í™˜í•  ì´ë¯¸ì§€ íŒŒì¼
X, Y = 314, 314
RULE = "B3/S23"
THRESHOLD = 100  # RGB í•© ê¸°ì¤€

# ===== ì´ë¯¸ì§€ ë¡œë“œ =====
img = Image.open(IMAGE_PATH).convert("RGB")
img = img.resize((X, Y))  # ì•ˆì „ìš©

# ===== í”½ì…€ â†’ Life ì…€ =====
grid = []
for y in range(Y):
    row = []
    for x in range(X):
        r, g, b = img.getpixel((x, y))
        alive = (r + g + b) > THRESHOLD
        row.append('o' if alive else 'b')
    grid.append(row)

# ===== RLE ì••ì¶• =====
def rle_encode_row(row):
    result = ""
    count = 1
    for i in range(1, len(row)):
        if row[i] == row[i-1]:
            count += 1
        else:
            result += (str(count) if count > 1 else "") + row[i-1]
            count = 1
    result += (str(count) if count > 1 else "") + row[-1]
    return result

# ===== RLE ë³¸ë¬¸ ìƒì„± =====
body_lines = []
for row in grid:
    body_lines.append(rle_encode_row(row) + "$")

body = "\n".join(body_lines)
body = body.rstrip("$") + "!"

# ===== ìµœì¢… RLE =====
rle = f"""#N âŸªå¤§éŸ“ Multiverse Empire â€¢ Established 1995 â€¢ ê±´ì–‘(å»ºé™½) ì›ë…„ 1024x1024px life of game logoâŸ«
#O Generated by Python (ChatGPT í˜‘ì—…)
#C RGB sum > {THRESHOLD} â†’ alive(o)
x = {X}, y = {Y}, rule = {RULE}
{body}
"""

# ===== íŒŒì¼ ì €ì¥ =====
with open("âŸªå¤§éŸ“ Multiverse Empire â€¢ Established 1995 â€¢ ê±´ì–‘(å»ºé™½) ì›ë…„ 1024x1024px life of game logoâŸ«.rle", "w", encoding="utf-8") as f:
    f.write(rle)

print("âœ… RLE ìƒì„± ì™„ë£Œ: multiverse_empire_314x314.rle")
